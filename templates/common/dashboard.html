{% extends 'common/base.html' %}

{% block content %}

    <div class="container-fluid">
        <h2 class="text-center mb-5 mu-5">BlogMate Articles</h2>
        {% if not request.user.is_authenticated %}
            <div class="mb-5">
                <p class="text-center">You need to <a href="{% url 'login' %}">Login</a> first. If you don't have an
                    account, you can <a href="{% url 'register' %}">create one here.</a></p>
                <p class="text-center">Please note that as unauthenticated user you can only read articles. You are not allowed to create a new
                    blog article, neither comment or like articles.</p>
            </div>
        {% endif %}
        {% if posts %}
            {% for post in posts %}
                <div class="row">
                    {#                    <div class="col-md-4">#}
                    <div class="card h-100 shadow-sm mb-4">
                        {#                            <img src="https://via.placeholder.com/300x200" class="card-img-top" alt="Topic Image">#}
                        <div class="card-body">
                            <h5 class="card-title">{{ post.title }}
                            {% if request.user == post.author %}
                            <span>(You own this article)</span>
                            {% endif %}
                            </h5>
                            <p class="card-text">{{ post.description }}</p>

                            <div class="col-md-8 col-lg-8 mb-4">
                                <p class="d-inline me-3">Author: {{ post.author }}</p>
                                <p class="d-inline me-3">Likes: {{ post.likes_count }}</p>
                                <p class="d-inline me-3">Total comments: {{ post.comments.count }}</p>
                                <p class="d-inline me-3">Created on: {{ post.date_added|date:'d/m/Y' }}</p>
                                <p class="d-inline">Last edited on: {{ post.date_modified|date:'d/m/Y' }}</p>
                            </div>
                            
                            <a href="{% url 'article' post.pk %}" class="btn btn-primary">Read article</a>

                        </div>
                    </div>
                    {#                    </div>#}
                </div>
            {% endfor %}

        {% else %}

            <p class="text-center">There are no blogs post yet! Be the first one to create a BlogMate post!</p>

        {% endif %}

    </div>

{% endblock %}
